function initNavigation(){const e=document.querySelector(".navbar"),t=document.getElementById("mobileMenuBtn"),o=document.querySelector(".nav-links"),n=document.querySelectorAll(".nav-link");t&&o&&(t.addEventListener("click",(function(){o.classList.toggle("active"),t.classList.toggle("active")})),n.forEach((e=>{e.addEventListener("click",(()=>{o.classList.remove("active"),t.classList.remove("active")}))})),document.addEventListener("click",(function(n){e.contains(n.target)||(o.classList.remove("active"),t.classList.remove("active"))}))),n.forEach((t=>{t.addEventListener("click",(function(t){t.preventDefault();const o=this.getAttribute("href"),n=document.querySelector(o);if(n){const t=e.offsetHeight,o=n.offsetTop-t;window.scrollTo({top:o,behavior:"smooth"})}}))})),window.addEventListener("scroll",(function(){window.scrollY>100?e.classList.add("scrolled"):e.classList.remove("scrolled")})),window.addEventListener("scroll",(function(){const t=document.querySelectorAll("section[id]"),o=window.scrollY+e.offsetHeight+100;t.forEach((e=>{const t=e.offsetTop,i=e.offsetHeight,l=e.getAttribute("id"),r=document.querySelector(`.nav-link[href="#${l}"]`);o>=t&&o<t+i&&(n.forEach((e=>e.classList.remove("active"))),r&&r.classList.add("active"))}))}))}function initThemeToggle(){const e=document.getElementById("themeToggle"),t=document.body,o=e?.querySelector("i"),n=localStorage.getItem("theme")||"light";console.log("\ud83c\udfa8 [Theme] Saved theme from localStorage:",n),t.setAttribute("data-theme",n),console.log("\ud83c\udfa8 [Theme] Set body data-theme to:",t.getAttribute("data-theme"));const i=localStorage.getItem("color-theme")||"default";if(document.documentElement.setAttribute("data-color-theme",i),console.log("\ud83c\udfa8 [Theme] Set html data-color-theme to:",document.documentElement.getAttribute("data-color-theme")),updateThemeIcon(o,n),e){const o=e.cloneNode(!0);e.parentNode.replaceChild(o,e),console.log("\ud83c\udfa8 [Theme] Adding click event listener to theme toggle button"),o.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),console.log("\ud83c\udfa8 [Theme] Theme toggle button clicked!",e);const n=t.getAttribute("data-theme"),i="dark"===n?"light":"dark";console.log("\ud83c\udfa8 [Theme] Theme switch:",{currentTheme:n,newTheme:i,bodyDataTheme:t.getAttribute("data-theme")}),t.setAttribute("data-theme",i),localStorage.setItem("theme",i);const l=o.querySelector("i");updateThemeIcon(l,i),console.log("\ud83c\udfa8 [Theme] After switch:",{bodyDataTheme:t.getAttribute("data-theme"),localStorage:localStorage.getItem("theme"),iconClasses:l?.className})}))}else console.error('\u274c [Theme] Theme toggle button not found! Make sure element with id="themeToggle" exists');console.log("\ud83c\udfa8 [Theme] Theme toggle initialization complete")}function updateThemeIcon(e,t){if(console.log("\ud83c\udfa8 [Icon] Updating theme icon:",{icon:!!e,theme:t,currentClasses:e?.className}),!e)return void console.error("\u274c [Icon] No icon element provided to updateThemeIcon");const o=e.className;"dark"===t?(e.className="fas fa-sun theme-icon",console.log("\ud83c\udfa8 [Icon] Changed to sun icon (dark theme)")):(e.className="fas fa-moon theme-icon",console.log("\ud83c\udfa8 [Icon] Changed to moon icon (light theme)")),console.log("\ud83c\udfa8 [Icon] Icon update complete:",{oldClasses:o,newClasses:e.className,theme:t})}function initColorThemeSwitch(){function e(){console.log("\ud83c\udfa8 [ColorTheme] Opening dropdown..."),c=!0,n.classList.add("show"),i.setAttribute("aria-expanded","true"),console.log("\ud83c\udfa8 [ColorTheme] Dropdown opened, classes:",n.className);const e=i.querySelector(".fa-chevron-down");e&&(e.style.transform="rotate(180deg)",e.style.transition="transform 0.3s ease")}function t(){console.log("\ud83c\udfa8 [ColorTheme] Closing dropdown..."),c=!1,n.classList.remove("show"),i.setAttribute("aria-expanded","false"),console.log("\ud83c\udfa8 [ColorTheme] Dropdown closed, classes:",n.className);const e=i.querySelector(".fa-chevron-down");e&&(e.style.transform="rotate(0deg)",e.style.transition="transform 0.3s ease")}const o=document.querySelectorAll(".color-theme-option"),n=document.getElementById("colorThemeDropdown"),i=document.getElementById("colorThemeToggle"),l=document.querySelector('meta[name="show-color-theme-switcher"]'),r=l&&"true"===l.content;if(console.log("\ud83c\udfa8 [ColorTheme] Configuration check:",{shouldShowSwitcher:r,configValue:l?.content}),!r){console.log("\ud83c\udfa8 [ColorTheme] Hiding color theme switcher (disabled in config)");const e=document.querySelector(".color-theme-switcher");return e&&(e.style.display="none"),void applyConfiguredTheme()}if(console.log("\ud83c\udfa8 [ColorTheme] Initializing color theme switcher...",{colorThemeToggle:!!i,colorThemeDropdown:!!n,optionsCount:o.length}),!i||!n)return void console.error("\u274c [ColorTheme] Required elements not found!",{toggle:!!i,dropdown:!!n});let c=!1,s=localStorage.getItem("color-theme")||"default";document.documentElement.setAttribute("data-color-theme",s),updateActiveColorOption(s),i.addEventListener("click",(function(o){console.log("\ud83c\udfa8 [ColorTheme] Toggle button clicked!",o),console.log("\ud83c\udfa8 [ColorTheme] Current state - isDropdownOpen:",c),o.preventDefault(),o.stopPropagation(),document.querySelectorAll(".color-theme-dropdown.show").forEach((e=>{e!==n&&e.classList.remove("show")})),c?(console.log("\ud83c\udfa8 [ColorTheme] Closing dropdown"),t()):(console.log("\ud83c\udfa8 [ColorTheme] Opening dropdown"),e())})),document.addEventListener("click",(function(e){const o=i.contains(e.target),l=n.contains(e.target);console.log("\ud83c\udfa8 [ColorTheme] Document click:",{target:e.target,isClickInsideToggle:o,isClickInsideDropdown:l,dropdownHasShow:n.classList.contains("show")}),o||l||!c||(console.log("\ud83c\udfa8 [ColorTheme] Closing dropdown due to outside click"),t())})),document.addEventListener("keydown",(function(e){"Escape"===e.key&&c&&t()})),o.forEach((e=>{e.addEventListener("click",(function(o){o.preventDefault(),o.stopPropagation();const n=e.getAttribute("data-theme");n&&n!==s&&(document.documentElement.setAttribute("data-color-theme",n),localStorage.setItem("color-theme",n),s=n,updateActiveColorOption(n),e.style.transform="scale(0.95)",setTimeout((()=>{e.style.transform=""}),150),setTimeout((()=>{t()}),200))}))}))}function applyConfiguredTheme(){const e=document.querySelector('meta[name="site-color-theme"]'),t=e?e.content:"default";console.log("\ud83c\udfa8 [ColorTheme] Applying configured theme:",t),document.documentElement.setAttribute("data-color-theme",t),updateActiveColorOption(t)}function updateActiveColorOption(e){document.querySelectorAll(".color-theme-option").forEach((t=>{t.classList.remove("active"),t.getAttribute("data-theme")===e&&t.classList.add("active")}))}function showTestimonial(e){if(!testimonialsState.container)return;const t=-e*testimonialsState.container.parentElement.offsetWidth;testimonialsState.container.style.transform=`translateX(${t}px)`,testimonialsState.currentIndex=e,updateTestimonialDots(e)}function updateTestimonialDots(e){document.querySelectorAll(".testimonial-dots .dot").forEach(((t,o)=>{o===e?t.classList.add("active"):t.classList.remove("active")}))}function nextTestimonial(){!testimonialsState.cards||testimonialsState.cards.length<=1||(testimonialsState.currentIndex=(testimonialsState.currentIndex+1)%testimonialsState.cards.length,showTestimonial(testimonialsState.currentIndex))}function prevTestimonial(){!testimonialsState.cards||testimonialsState.cards.length<=1||(testimonialsState.currentIndex=(testimonialsState.currentIndex-1+testimonialsState.cards.length)%testimonialsState.cards.length,showTestimonial(testimonialsState.currentIndex))}function initTestimonials(){const e=document.querySelector(".testimonials-container"),t=document.querySelector(".testimonials-slider"),o=document.querySelector(".prev-btn"),n=document.querySelector(".next-btn"),i=document.querySelectorAll(".testimonial-card"),l=document.querySelectorAll(".testimonial-dots .dot");if(!e||!i.length||!t)return;testimonialsState.container=e,testimonialsState.cards=i,testimonialsState.currentIndex=0;const r=t.offsetWidth;e.style.width=i.length*r+"px",i.forEach((e=>{e.style.width=`${r}px`,e.style.flex=`0 0 ${r}px`})),showTestimonial(0),n&&n.addEventListener("click",nextTestimonial),o&&o.addEventListener("click",prevTestimonial),l.forEach(((e,t)=>{e.addEventListener("click",(()=>{testimonialsState.currentIndex=t,showTestimonial(t)}))})),window.addEventListener("resize",(()=>{const o=t.offsetWidth;e.style.width=i.length*o+"px",i.forEach((e=>{e.style.width=`${o}px`,e.style.flex=`0 0 ${o}px`})),showTestimonial(testimonialsState.currentIndex)}))}function initContactForm(){const e=document.getElementById("contactForm");if(!e)return void console.log("\ud83d\udce7 [ContactForm] No contact form found or Formspree not configured");const t=e.getAttribute("action");if(!t||t.includes("YOUR_FORM_ID")||!t.startsWith("https://formspree.io/"))return console.warn("\u26a0\ufe0f [ContactForm] Formspree endpoint not configured properly"),void showFormConfigWarning();console.log("\ud83d\udce7 [ContactForm] Initializing Formspree contact form"),e.addEventListener("submit",(async function(t){t.preventDefault();const o=e.querySelector(".submit-btn"),n=o.querySelector(".btn-text"),i=o.querySelector(".btn-loading"),l=new FormData(e);n.style.display="none",i.style.display="inline-flex",o.disabled=!0;try{const t=await fetch(e.action,{method:"POST",body:l,headers:{Accept:"application/json"}});if(t.ok)showNotification("Message sent successfully! Thank you for contacting us.","success"),e.reset();else{const e=await t.json();if(e.errors){showNotification(`Error: ${e.errors.map((e=>e.message)).join(", ")}`,"error")}else showNotification("Failed to send message. Please try again.","error")}}catch(e){console.error("Form submission error:",e),showNotification("Network error. Please check your connection and try again.","error")}finally{n.style.display="inline-flex",i.style.display="none",o.disabled=!1}}))}function showFormConfigWarning(){const e=document.getElementById("contactForm");if(!e)return;const t=document.createElement("div");t.className="form-config-warning",t.style.cssText="\n        background: #fef2f2;\n        border: 1px solid #fecaca;\n        color: #dc2626;\n        padding: 1rem;\n        border-radius: 8px;\n        margin-bottom: 1rem;\n        font-size: 0.875rem;\n    ",t.innerHTML="\n        <strong>\u26a0\ufe0f Configuration Required:</strong> \n        Please update your Formspree endpoint URL in <code>_config.yml</code> to enable this contact form.\n    ",e.parentNode.insertBefore(t,e),e.addEventListener("submit",(function(e){e.preventDefault(),showNotification("Please configure Formspree endpoint URL first!","error")}))}function showNotification(e,t="info"){document.querySelectorAll(".notification").forEach((e=>e.remove()));const o=document.createElement("div");o.className=`notification notification-${t}`,o.innerHTML=`\n        <div class="notification-content">\n            <span class="notification-message">${e}</span>\n            <button class="notification-close" aria-label="Close">\n                <i class="fas fa-times"></i>\n            </button>\n        </div>\n    `,o.style.cssText=`\n        position: fixed;\n        top: 2rem;\n        right: 2rem;\n        background: ${"success"===t?"var(--success-color)":"error"===t?"var(--error-color)":"var(--primary-color)"};\n        color: white;\n        padding: 1rem 1.5rem;\n        border-radius: var(--border-radius);\n        box-shadow: 0 10px 25px var(--shadow);\n        z-index: 10000;\n        transform: translateX(100%);\n        transition: var(--transition);\n        max-width: 400px;\n    `,document.body.appendChild(o),setTimeout((()=>{o.style.transform="translateX(0)"}),100);o.querySelector(".notification-close").addEventListener("click",(()=>{o.style.transform="translateX(100%)",setTimeout((()=>o.remove()),300)})),setTimeout((()=>{o.parentNode&&(o.style.transform="translateX(100%)",setTimeout((()=>o.remove()),300))}),5e3)}function initScrollAnimations(){const e=new IntersectionObserver((function(t){t.forEach((t=>{t.isIntersecting&&(t.target.classList.add("fade-in-up"),e.unobserve(t.target))}))}),{threshold:.1,rootMargin:"0px 0px -50px 0px"});document.querySelectorAll(".product-card, .feature-card, .skill-item, .contact-method").forEach((t=>e.observe(t)))}function initLanguageSwitcher(){const e=document.getElementById("languageSelect");if(!e)return;window.location.pathname;const t=document.documentElement.lang||"en";e.addEventListener("change",(function(){const e=this.value;localStorage.setItem("preferred-language",e);const t=document.querySelector('meta[name="site-baseurl"]'),o=t?t.getAttribute("content"):"";let n=o+"/";n="zh-TW"===e?o+"/index-zh-tw/":"zh-CN"===e?o+"/index-zh-cn/":o+"/",window.location.href=n})),e.value=t}function debounce(e,t){let o;return function(...n){const i=()=>{clearTimeout(o),e(...n)};clearTimeout(o),o=setTimeout(i,t)}}function throttle(e,t){let o;return function(){const n=arguments,i=this;o||(e.apply(i,n),o=!0,setTimeout((()=>o=!1),t))}}function initVideoPlayers(){const e=document.querySelectorAll(".video-player");console.log(`Found ${e.length} video players`),e.forEach(((e,t)=>{console.log(`Initializing video player ${t+1}:`,e.querySelector("source")?.src||"No source found"),e.muted=!0,e.playsInline=!0,e.controls=!0,e.preload="metadata",e.load(),e.addEventListener("loadedmetadata",(function(){console.log(`Video ${t+1} metadata loaded, duration: ${this.duration}s`)})),e.addEventListener("canplay",(function(){console.log(`Video ${t+1} can play`)})),e.addEventListener("error",(function(){console.error(`Video ${t+1} error:`,this.error)})),e.addEventListener("click",(function(){console.log(`Video ${t+1} clicked`),this.paused?this.play().catch((e=>{console.error("Play failed:",e)})):this.pause()}))}))}function playVideo(e){const t=e.parentNode.querySelector("video");if(t){console.log("Playing video:",t.src||t.currentSrc),t.muted=!0,t.playsInline=!0;const o=t.play();if(void 0!==o)o.then((()=>{e.classList.add("hidden"),console.log("Video started playing")})).catch((t=>{console.error("Play failed:",t),e.classList.add("hidden")}));else try{t.play(),e.classList.add("hidden")}catch(t){console.error("Play failed:",t),e.classList.add("hidden")}t.addEventListener("play",(function(){e.classList.add("hidden")})),t.addEventListener("pause",(function(){e.classList.remove("hidden")})),t.addEventListener("ended",(function(){e.classList.remove("hidden")}))}else console.error("No video element found")}document.addEventListener("DOMContentLoaded",(function(){initNavigation(),initThemeToggle(),initColorThemeSwitch(),initTestimonials(),initContactForm(),initScrollAnimations(),initLanguageSwitcher()}));let testimonialsState={container:null,cards:null,currentIndex:0};if(window.addEventListener("scroll",throttle((function(){}),16)),"IntersectionObserver"in window){const e=new IntersectionObserver((t=>{t.forEach((t=>{if(t.isIntersecting){const o=t.target;o.src=o.dataset.src,o.classList.remove("lazy"),e.unobserve(o)}}))}));document.querySelectorAll("img[data-src]").forEach((t=>e.observe(t)))}const notificationStyles=document.createElement("style");notificationStyles.textContent="\n    .notification-content {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        gap: 1rem;\n    }\n    \n    .notification-close {\n        background: none;\n        border: none;\n        color: white;\n        cursor: pointer;\n        padding: 0;\n        font-size: 1rem;\n        opacity: 0.8;\n        transition: opacity 0.2s;\n    }\n    \n    .notification-close:hover {\n        opacity: 1;\n    }\n    \n    .dropdown-menu.show {\n        opacity: 1;\n        visibility: visible;\n        transform: translateY(0);\n    }\n    \n    @media (max-width: 768px) {\n        .notification {\n            left: 1rem;\n            right: 1rem;\n            max-width: none;\n        }\n    }\n",document.head.appendChild(notificationStyles),document.addEventListener("DOMContentLoaded",(function(){console.log("\ud83d\ude80 [Init] DOM Content Loaded - Starting initialization..."),console.log("\ud83d\ude80 [Init] Current page URL:",window.location.href),console.log("\ud83d\ude80 [Init] Available elements:",{themeToggle:!!document.getElementById("themeToggle"),colorThemeToggle:!!document.getElementById("colorThemeToggle"),body:!!document.body,html:!!document.documentElement}),console.log("\ud83d\ude80 [Init] Initializing theme toggle..."),initThemeToggle(),console.log("\ud83d\ude80 [Init] Initializing color theme switch..."),initColorThemeSwitch(),console.log("\ud83d\ude80 [Init] Initializing other components..."),initNavigation(),initTestimonials(),initContactForm(),initScrollAnimations(),initLanguageSwitcher(),initVideoPlayers(),console.log("\ud83d\ude80 [Init] All components initialized successfully!"),window.debugTheme={getCurrentTheme:function(){const e=document.body.getAttribute("data-theme"),t=window.localStorage.getItem("theme");return console.log("\ud83d\udd0d [Debug] Current theme state:",{bodyDataTheme:e,localStorage:t,iconClasses:document.querySelector("#themeToggle i")?.className}),{bodyTheme:e,localStorage:t}},manualToggle:function(){console.log("\ud83d\udd27 [Debug] Manual theme toggle triggered");const e=document.body,t="dark"===(e.getAttribute("data-theme")||"light")?"light":"dark";e.setAttribute("data-theme",t),localStorage.setItem("theme",t);updateThemeIcon(document.querySelector("#themeToggle i"),t),console.log("\ud83d\udd27 [Debug] Manual toggle complete")},checkElements:function(){const e=document.body,t=window.getComputedStyle(e);console.log("\ud83d\udd0d [Debug] Checking theme elements:",{themeToggle:document.getElementById("themeToggle"),themeIcon:document.querySelector("#themeToggle i"),body:document.body,bodyDataTheme:e.getAttribute("data-theme"),htmlDataColorTheme:document.documentElement.getAttribute("data-color-theme"),computedBackgroundColor:t.backgroundColor,computedColor:t.color,cssVariables:{bgPrimary:t.getPropertyValue("--bg-primary"),textPrimary:t.getPropertyValue("--text-primary")}})},forceThemeUpdate:function(){console.log("\ud83d\udd27 [Debug] Forcing theme update...");const e=document.body,t=e.getAttribute("data-theme")||"light";e.removeAttribute("data-theme"),setTimeout((()=>{e.setAttribute("data-theme",t),console.log("\ud83d\udd27 [Debug] Theme attribute refreshed:",t)}),10)}},console.log("\ud83d\udd27 [Debug] Global debugging functions available:"),console.log("  - debugTheme.getCurrentTheme()"),console.log("  - debugTheme.manualToggle()"),console.log("  - debugTheme.checkElements()"),console.log("  - debugTheme.forceThemeUpdate()"),document.querySelectorAll(".video-wrapper video, .simple-video-wrapper video").forEach((e=>{e.addEventListener("click",(function(){if(console.log("Video clicked directly"),e.paused){e.muted=!0,e.playsInline=!0;const t=e.play();void 0!==t&&t.then((()=>{console.log("Video playing from direct click");const t=e.parentNode.querySelector(".video-play-button, .big-play-button");t&&t.classList.add("hidden")})).catch((e=>{console.error("Direct click play failed:",e)}))}else{e.pause();const t=e.parentNode.querySelector(".video-play-button, .big-play-button");t&&t.classList.remove("hidden")}})),e.addEventListener("dblclick",(function(){e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen&&e.mozRequestFullScreen()}))}))}));